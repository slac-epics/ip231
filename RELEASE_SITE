# This is the site configuration file
# This file is custom for the PCDS EPICS
# and should not be redistributed with
# EPICS modules outside of PCDS build
# environment and releases.

# EPICS_SITE_TOP is set here
EPICS_SITE_TOP=$(dir $(EPICS_SITE_CONFIG))
export EPICS_SITE_TOP

# EPICS_TOOLS_SITE_TOP is set here if not already set
ifndef EPICS_TOOLS_SITE_TOP
	EPICS_TOOLS_SITE_TOP=$(EPICS_SITE_TOP)
endif

# EPICS_HOST_ARCH is set here
# If we are building the base then use the local EpicsHostArch.pl, otherwise
# use the released one.
ifndef EPICS_HOST_ARCH
ifeq ($(shell if [ -e $(TOP)/startup/EpicsHostArch.pl ]; then echo true; fi),true)
EPICS_HOST_ARCH=$(shell $(TOP)/startup/EpicsHostArch.pl)
else
EPICS_HOST_ARCH=$(shell $(EPICS_BASE)/startup/EpicsHostArch.pl)
endif
export EPICS_HOST_ARCH
endif

# =================================================================
# EPICS Packages versions
# =================================================================
EXTENSIONS_MODULE_VERSION=
BASE_MODULE_VERSION=
VDCT_MODULE_VERSION=

# =================================================================
# Define EPICS_EXTENSIONS
# =================================================================
EPICS_EXTENSIONS=$(EPICS_SITE_TOP)/extensions/$(EXTENSIONS_MODULE_VERSION)

# =================================================================
# Define EPICS_BASE
# =================================================================
EPICS_BASE=$(EPICS_SITE_TOP)/base/$(BASE_MODULE_VERSION)

# =============================================================
# Define location of module tree with respect to
# EPICS_SITE_TOP
# =============================================================
EPICS_MODULES=$(EPICS_SITE_TOP)/modules

# =================================================================
# Define VDCT path
# =================================================================
VDCT=$(EPICS_SITE_TOP)/vdct/$(VDCT_MODULE_VERSION)

# =================================================================
# EPICS templates for config files
# =================================================================
TEMPLATE_TOP=$(EPICS_BASE)/templates/makeBaseApp/top

# ========================================================================================
# We need it for macro substitutions, point MSI at the binary:
# ========================================================================================
MSI=$(EPICS_EXTENSIONS)/bin/$(EPICS_HOST_ARCH)/msi

# =============================================================
# Location of the PCDS development tools that are not part of 
# EPICS (but are provided in this repository).
# Note: scripts expect TOOLS_MODULE_VERSION to be self described
# (ie: do not use any variable or make expression) and TOOLS
# to be in tools/$(TOOLS_MODULE_VERSION).
# =============================================================
TOOLS_MODULE_VERSION=
TOOLS=$(EPICS_TOOLS_SITE_TOP)/tools/$(TOOLS_MODULE_VERSION)
